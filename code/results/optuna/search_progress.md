# VoltageTimesNet_v2 超参数搜索进度

## 搜索配置
- **搜索方法**: Optuna TPE Sampler (multivariate=True)
- **总 Trial 数**: 30
- **训练 Epochs**: 5
- **数据集**: RuralVoltage/realistic_v2 (16 features)
- **开始时间**: 2026-02-03 10:48:13

## 搜索空间
| 参数 | 范围 |
|------|------|
| d_model | [32, 64, 128, 256] |
| e_layers | [1, 4] |
| d_ff | [32, 64, 128, 256, 512] |
| top_k | [2, 7] |
| num_kernels | [4, 6, 8] |
| lr | [1e-4, 1e-2] (log) |
| batch_size | [32, 64, 128] |
| dropout | [0.0, 0.3] |
| seq_len | [50, 100, 200] |
| anomaly_ratio | [1.5, 5.0] |

## Trial 结果

| Trial | d_model | e_layers | d_ff | top_k | num_kernels | lr | batch_size | dropout | seq_len | anomaly_ratio | Accuracy | Precision | Recall | F1 | 最佳? |
|:-----:|:-------:|:--------:|:----:|:-----:|:-----------:|:--:|:----------:|:-------:|:-------:|:-------------:|:--------:|:---------:|:------:|:--:|:-----:|
| 0 | 64 | 1 | 128 | 2 | 4 | 2.31e-4 | 128 | 0.130 | 100 | 2.52 | 0.8707 | 0.5501 | 0.6766 | 0.6068 | |
| 1 | 128 | 3 | 128 | 7 | 4 | 1.57e-4 | 32 | 0.149 | 100 | 3.82 | 0.8561 | 0.5069 | 0.8819 | 0.6438 | |
| 2 | 128 | 4 | 64 | 2 | 8 | 5.99e-4 | 64 | 0.084 | 200 | 1.76 | 0.8978 | 0.6524 | 0.6725 | 0.6623 | |
| 3 | 32 | 4 | 128 | 2 | 4 | 1.34e-4 | 128 | 0.191 | 50 | 4.00 | 0.8641 | 0.5195 | 0.9782 | 0.6786 | |
| 4 | 128 | 4 | 256 | 5 | 8 | 1.31e-3 | 32 | 0.134 | 50 | 2.86 | 0.8561 | 0.5072 | 0.8533 | 0.6362 | |
| 5 | 256 | 3 | 64 | 4 | 6 | 1.05e-3 | 32 | 0.101 | 50 | 3.96 | 0.8646 | 0.5201 | 0.9916 | 0.6824 | |
| **6** | **64** | **2** | **256** | **2** | **6** | **1.95e-4** | **64** | **0.202** | **50** | **2.79** | **0.9183** | **0.6543** | **0.9390** | **0.7712** | **★** |

## 当前最佳配置 (Trial 6)
```json
{
  "d_model": 64,
  "e_layers": 2,
  "d_ff": 256,
  "top_k": 2,
  "num_kernels": 6,
  "lr": 0.00019489008462344248,
  "batch_size": 64,
  "dropout": 0.20164066422176355,
  "seq_len": 50,
  "anomaly_ratio": 2.7872409645173866,
  "f1_score": 0.7712,
  "recall": 0.9390,
  "precision": 0.6543,
  "accuracy": 0.9183
}
```

## 关键发现

1. **seq_len=50 优于 100/200**：前 7 个 trial 中，最佳 5 个都使用 seq_len=50
2. **top_k=2 频繁出现在优秀 trial 中**：周期数不需要太多
3. **适中的 dropout (0.13-0.20) 效果好**：有助于泛化
4. **d_model=64 + d_ff=256 组合优秀**：中等维度 + 较大前馈层
5. **anomaly_ratio 在 2.5-4.0 区间较优**

## 与之前最佳对比
| 指标 | 之前最佳 (3 trials) | 当前最佳 (Trial 6) | 提升 |
|------|:-------------------:|:------------------:|:----:|
| F1 | 0.7649 | 0.7712 | +0.8% |
| Recall | 0.9631 | 0.9390 | -2.5% |
| Precision | 0.6343 | 0.6543 | +3.2% |
| Accuracy | 0.9131 | 0.9183 | +0.6% |

## 搜索进度
- **已完成**: 7/30 (23%)
- **当前状态**: 运行中
- **最后更新**: 2026-02-03 12:10
