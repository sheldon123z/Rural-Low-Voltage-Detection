# 消融实验处理方案 - 写作材料

> **生成时间**: 2026-01-27
> **用途**: 论文第四章消融实验部分的修正方案

---

## 一、问题诊断

### 1.1 当前状态

论文中包含三个消融实验表格，**均为虚构数据**：

| 表格标签 | 表格标题 | 位置 | 数据来源 |
|----------|---------|------|:--------:|
| `tab:ablation_alpha` | 混合比例α对VoltageTimesNet性能的影响 | 第284-299行 | ❌ 未运行 |
| `tab:ablation_seqlen` | 序列长度对TimesNet性能的影响 | 第313-327行 | ⚠️ 仅100有真实数据 |
| `tab:ablation_layers` | 编码器层数对TimesNet性能的影响 | 第339-353行 | ❌ 未运行 |

### 1.2 风险评估

- **学术诚信风险**: 虚构实验数据属于学术不端
- **答辩风险**: 评委可能质疑消融实验细节
- **可复现性**: 无法提供实验日志和复现命令

---

## 二、处理方案对比

### 方案A：删除虚假表格，保留理论分析

**优点**:
- 最快实施（无需运行实验）
- 避免学术诚信问题
- 理论分析仍有价值

**缺点**:
- 论文实验部分内容减少
- 缺乏定量消融验证

**实施工时**: 2-3小时

---

### 方案B：补充运行消融实验

**优点**:
- 获得真实数据
- 论文完整性最好
- 可提供实验日志

**缺点**:
- 需要较长实验时间
- VoltageTimesNet 在 seq_len=100 下效果差，消融意义有限

**预计实验时间**:
| 实验 | 组数 | 单组时间 | 总时间 |
|------|:----:|:--------:|:------:|
| α消融 | 5 | ~2h | ~10h |
| seq_len消融 | 4 | ~2h | ~8h |
| 层数消融 | 4 | ~2h | ~8h |
| **总计** | - | - | **~26h** |

**实施工时**: 26-30小时

---

### 方案C：部分保留+理论说明

**策略**:
1. 删除α消融和层数消融表格（未运行）
2. 保留序列长度消融表格，但仅展示 seq_len=100 的真实数据
3. 对其他配置进行理论分析而非声称有实验数据

**优点**:
- 折中方案
- 保留部分实验内容
- 理论与实验结合

**缺点**:
- 消融实验仍显单薄

**实施工时**: 4-5小时

---

### 🌟 方案D：删除虚假+运行关键消融（推荐）

**策略**:
1. 删除虚假的α消融和层数消融表格
2. 运行序列长度消融（最有意义）
3. 为VoltageTimesNet问题添加专门分析

**优点**:
- 平衡时间与质量
- 序列长度消融最有科学价值
- 能解释VoltageTimesNet性能问题

**实验内容**:
| seq_len | 模型 | 预计时间 |
|:-------:|------|:--------:|
| 50 | TimesNet | ~1.5h |
| 100 | TimesNet | ✅ 已有 |
| 200 | TimesNet | ~2h |
| 500 | TimesNet | ~3h |

**实施工时**: 8-10小时（6h实验+2-4h写作）

---

## 三、推荐方案实施细节（方案D）

### 3.1 删除虚假消融表格

**删除内容**（`chap03.tex`）:
- 第282-308行：3.2.1小节（混合比例α消融）
- 第335-360行：3.2.3小节（编码器层数消融）

### 3.2 保留并修正序列长度消融

**保留位置**: 第309-333行

**修正后的表格**（需等实验完成后填入真实数据）:

```latex
\begin{table}[htbp]
	\centering
	\caption{序列长度对TimesNet在RuralVoltage上性能的影响}
	\label{tab:ablation_seqlen}
	\begin{tabular}{cccccc}
		\toprule
		\textbf{seq\_len} & \textbf{时间跨度} & \textbf{准确率} & \textbf{召回率} & \textbf{F1分数} & \textbf{训练时间} \\
		\midrule
		50                & 50秒           & 待实验        & 待实验        & 待实验        & 待实验         \\
		100               & 100秒          & 0.8259          & 0.4582          & 0.6059          & ~2min         \\
		200               & 200秒          & 待实验        & 待实验        & 待实验        & 待实验         \\
		500               & 500秒          & 待实验        & 待实验        & 待实验        & 待实验         \\
		\bottomrule
	\end{tabular}
\end{table}
```

### 3.3 添加VoltageTimesNet分析小节

**新增内容**（替代α消融）:

```latex
\subsection{VoltageTimesNet预设周期策略分析}

VoltageTimesNet的核心创新是混合周期发现策略，将FFT自适应周期与电网领域预设周期相结合。预设周期包括60秒（1分钟采样周期）、300秒（5分钟负荷周期）、900秒（15分钟调度周期）和3600秒（1小时日内周期），这些周期来自电力系统运行的固有规律。

然而，实验结果（F1=0.3123）低于预期，经分析发现关键问题在于序列长度限制。在时序周期分析中，有效周期需满足条件：周期长度 $\leq$ seq\_len/2。当seq\_len=100时，预设周期中仅60秒满足有效性条件，其余周期（300s、900s、3600s）均无法被有效利用。

这一发现揭示了混合周期策略的适用条件：\textbf{VoltageTimesNet更适合在较长序列设置下使用}。当seq\_len$\geq$720时，60秒和300秒周期均可生效；当seq\_len$\geq$1800时，所有预设周期均有效。

该分析为后续工作指明了方向：（1）在更长序列上验证VoltageTimesNet的真实潜力；（2）设计自适应预设周期策略，根据序列长度动态选择有效周期；（3）探索数据增强方法，在短序列上模拟长周期特征。
```

### 3.4 简化编码器层数讨论

**修正后**（替代层数消融表格）:

```latex
\subsection{模型深度配置}

本研究采用2层编码器作为默认配置（e\_layers=2），参数量约0.6M。该配置的选择基于以下考量：

\textbf{理论依据}：TimesNet的核心是通过2D卷积捕获周期内和周期间的时序模式。2层编码器能够实现两级特征提取：第一层捕获局部时序模式，第二层建模全局时序依赖。更深的网络虽然理论上能表达更复杂的模式，但在数据量有限的RuralVoltage数据集（10,000训练样本）上可能导致过拟合。

\textbf{效率考量}：2层配置的参数量仅为0.6M，推理内存占用约0.9GB，满足边缘设备部署需求。相比之下，Transformer系列模型参数量通常在2.5--3.2M，内存占用是TimesNet的2--3倍。

综合考虑模型表达能力、泛化性能和部署效率，2层编码器是当前数据规模和应用场景下的合理选择。
```

---

## 四、序列长度消融实验命令

如果选择运行序列长度消融实验，使用以下命令：

```bash
cd /home/zhengxiaodong/exps/Rural-Low-Voltage-Detection/code

# seq_len=50
python run.py --is_training 1 --model TimesNet --data RuralVoltage \
  --root_path ./dataset/RuralVoltage/ --enc_in 16 --c_out 16 \
  --seq_len 50 --d_model 64 --d_ff 128 --top_k 5 \
  --batch_size 128 --train_epochs 10 --patience 3 \
  --num_workers 0 2>&1 | tee logs/TimesNet_RuralVoltage_seq50.log

# seq_len=200
python run.py --is_training 1 --model TimesNet --data RuralVoltage \
  --root_path ./dataset/RuralVoltage/ --enc_in 16 --c_out 16 \
  --seq_len 200 --d_model 64 --d_ff 128 --top_k 5 \
  --batch_size 128 --train_epochs 10 --patience 3 \
  --num_workers 0 2>&1 | tee logs/TimesNet_RuralVoltage_seq200.log

# seq_len=500
python run.py --is_training 1 --model TimesNet --data RuralVoltage \
  --root_path ./dataset/RuralVoltage/ --enc_in 16 --c_out 16 \
  --seq_len 500 --d_model 64 --d_ff 128 --top_k 5 \
  --batch_size 64 --train_epochs 10 --patience 3 \
  --num_workers 0 2>&1 | tee logs/TimesNet_RuralVoltage_seq500.log
```

**注意**: seq_len=500 需要减小 batch_size 以避免内存溢出。

---

## 五、修正后的消融实验章节结构

```
4.6 消融实验与分析
    4.6.1 VoltageTimesNet预设周期策略分析
          - 混合周期设计理念
          - 序列长度限制问题
          - 改进方向讨论
    4.6.2 序列长度影响分析
          - seq_len消融实验结果（如运行）
          - 或理论分析（如不运行）
    4.6.3 模型深度配置
          - 2层编码器选择依据
          - 效率与性能权衡
```

---

## 六、快速实施检查清单

### 如果选择方案A（最快）

- [ ] 删除 `tab:ablation_alpha` 表格及相关段落
- [ ] 删除 `tab:ablation_layers` 表格及相关段落
- [ ] 修改 `tab:ablation_seqlen` 为仅展示 seq_len=100 数据点
- [ ] 添加理论分析替代定量实验
- [ ] 更新章节小结

### 如果选择方案D（推荐）

- [ ] 运行序列长度消融实验（3个配置）
- [ ] 删除 `tab:ablation_alpha` 和 `tab:ablation_layers`
- [ ] 用真实数据更新 `tab:ablation_seqlen`
- [ ] 添加 VoltageTimesNet 分析小节
- [ ] 添加模型深度配置说明
- [ ] 更新章节小结

---

## 附录：相关文件位置

| 文件 | 路径 | 用途 |
|------|------|------|
| 论文第四章 | `thesis/contents/chap03.tex` | 需修改 |
| 实验汇总 | `code/docs/实验结果汇总_论文写作材料.md` | 数据来源 |
| 实验日志目录 | `code/logs/` | 验证数据 |
| 训练脚本 | `code/run.py` | 运行消融实验 |

---

*写作材料生成于 2026-01-27*
