# 第四章数据修正 - 写作材料

> **生成时间**: 2026-01-27
> **用途**: 论文第四章（chap03.tex）实验数据修正参考

---

## 一、问题诊断

### 1.1 数据不一致对比

| 模型 | 论文F1 | 真实F1 | 差异 | 问题严重性 |
|------|:------:|:------:|:----:|:----------:|
| MTSTimesNet | 0.7234 | 0.4705 | -34.9% | **严重** |
| TPATimesNet | 0.6981 | 0.6191 | -11.3% | 中等 |
| VoltageTimesNet | 0.6768 | 0.3123 | -53.9% | **严重** |
| TimesNet | 0.6467 | 0.6059 | -6.3% | 轻微 |
| Transformer | 0.5310 | 未运行 | - | **虚假数据** |
| Autoformer | 0.5671 | 未运行 | - | **虚假数据** |
| iTransformer | 0.6063 | 未运行 | - | **虚假数据** |
| DLinear | 0.5789 | 未运行 | - | **虚假数据** |

### 1.2 排名变化

| 排名 | 论文排名 | 真实排名 |
|:----:|:--------:|:--------:|
| 1 | MTSTimesNet | **TPATimesNet** |
| 2 | TPATimesNet | **TimesNet** |
| 3 | VoltageTimesNet | **MTSTimesNet** |
| 4 | TimesNet | **VoltageTimesNet** |

---

## 二、修正内容

### 2.1 表4-5：RuralVoltage数据集异常检测结果（修正版）

**位置**: `thesis/contents/chap03.tex` 第223-242行

**原表格**（需删除）：
```latex
\begin{table}[htbp]
	\centering
	\caption{RuralVoltage数据集异常检测结果（点调整后）}
	\label{tab:rural_results}
	\begin{tabular}{ccccc}
		\toprule
		\textbf{模型}     & \textbf{准确率}    & \textbf{精确率}    & \textbf{召回率}    & \textbf{F1分数}   \\
		\midrule
		Transformer     & 0.7521          & 0.7845          & 0.4012          & 0.5310          \\
		Autoformer      & 0.7689          & 0.8123          & 0.4356          & 0.5671          \\
		iTransformer    & 0.7856          & 0.8267          & 0.4789          & 0.6063          \\
		DLinear         & 0.7734          & 0.8034          & 0.4523          & 0.5789          \\
		\midrule
		TimesNet        & 0.8012          & 0.8456          & 0.5234          & 0.6467          \\
		VoltageTimesNet & 0.8156          & 0.8623          & 0.5567          & 0.6768          \\
		TPATimesNet     & 0.8234          & 0.8712          & 0.5823          & 0.6981          \\
		MTSTimesNet     & \textbf{0.8345} & \textbf{0.8834} & \textbf{0.6123} & \textbf{0.7234} \\
		\bottomrule
	\end{tabular}
\end{table}
```

**修正后表格**（使用真实数据）：
```latex
\begin{table}[htbp]
	\centering
	\caption{RuralVoltage数据集异常检测结果（点调整后）}
	\label{tab:rural_results}
	\begin{tabular}{ccccc}
		\toprule
		\textbf{模型}     & \textbf{准确率}    & \textbf{精确率}    & \textbf{召回率}    & \textbf{F1分数}   \\
		\midrule
		TPATimesNet     & \textbf{0.8303} & \textbf{0.8983} & \textbf{0.4723} & \textbf{0.6191} \\
		TimesNet        & 0.8259          & 0.8939          & 0.4582          & 0.6059          \\
		MTSTimesNet     & 0.7863          & 0.8509          & 0.3251          & 0.4705          \\
		VoltageTimesNet & 0.7549          & 0.8636          & 0.1906          & 0.3123          \\
		\bottomrule
	\end{tabular}
\end{table}
```

**说明**：
- 删除 Transformer、Autoformer、iTransformer、DLinear 四行（未在 RuralVoltage 上运行实验）
- 使用真实实验结果替换
- 按 F1 分数从高到低排序
- 加粗标记最优结果

---

### 2.2 实验结果分析段落（修正版）

**位置**: `thesis/contents/chap03.tex` 第244-250行

**原文**（需替换）：
> RuralVoltage数据集的实验结果显示，模型在农村电压数据集上的性能明显低于PSM数据集，表明电压异常检测具有更大的挑战性...MTSTimesNet在该数据集上表现最优，F1分数达到0.7234，相比原始TimesNet提升了11.9%...VoltageTimesNet（F1=0.6768）优于原始TimesNet（F1=0.6467），提升幅度为4.7%...

**修正后**：
```
RuralVoltage数据集的实验结果显示，模型在农村电压数据集上的性能明显低于PSM数据集，表明电压异常检测具有更大的挑战性，这主要是由于电压异常的多样性和复杂性所致。农村电网电压数据包含16维特征，相比PSM的25维特征信息量较少，增加了模型学习难度。此外，电压异常的类型更加复杂，包括欠压、过压、电压骤降、谐波畸变、三相不平衡等多种类型，不同异常的表现形式和持续时间各不相同，增加了检测难度。

TPATimesNet在RuralVoltage数据集上表现最优，F1分数达到0.6191，相比原始TimesNet（F1=0.6059）提升了2.2%。这一结果验证了三相注意力（Three-Phase Attention）机制在电压数据上的有效性。三相注意力机制能够显式建模Va、Vb、Vc三相电压之间的相关性，捕获三相不平衡等电压特有的异常模式，从而提升检测性能。

TimesNet在该数据集上同样表现稳健，F1分数为0.6059，证明了基于FFT周期发现和2D卷积的时序建模方法在电压数据上的基础有效性。

MTSTimesNet的F1分数为0.4705，低于预期。分析原因，多尺度时序建模虽然在理论上能捕获不同时间粒度的模式，但在seq_len=100的设置下，可用的时间尺度范围有限，多尺度分支的优势未能充分发挥。此外，多尺度分支增加了模型复杂度，在数据量有限的情况下可能导致过拟合。

VoltageTimesNet的F1分数为0.3123，表现不及预期。主要原因是seq_len=100时，预设的电网周期（60秒、300秒、900秒、3600秒）中仅60秒周期有效（周期需≤seq_len/2=50），导致混合周期策略未能发挥应有作用。这一发现提示，VoltageTimesNet更适合在较长序列（如seq_len≥720）下使用，以充分利用电网固有周期。

所有模型的精确率（0.75--0.90）明显高于召回率（0.19--0.47），表明模型倾向于保守检测。高精确率意味着模型预测的异常点可信度高，但召回率偏低表明存在较多漏检。在实际应用中，可通过降低检测阈值来提高召回率，但需权衡误报增加的代价。
```

---

### 2.3 跨数据集对比表（修正版）

**位置**: `thesis/contents/chap03.tex` 第256-268行 (`tab:cross_dataset_comparison`)

**修正后表格**：
```latex
\begin{table}[htbp]
	\centering
	\caption{TimesNet跨数据集性能对比}
	\label{tab:cross_dataset_comparison}
	\begin{tabular}{ccccc}
		\toprule
		\textbf{数据集}     & \textbf{准确率} & \textbf{召回率} & \textbf{F1分数} \\
		\midrule
		PSM（服务器监控）       & 0.9855       & 0.9625       & 0.9735        \\
		RuralVoltage（电压） & 0.8259       & 0.4582       & 0.6059        \\
		\bottomrule
	\end{tabular}
\end{table}
```

**修正后分析文字**（第270-274行）：
```
从模型性能差异来看，TimesNet在PSM数据集上F1分数达到0.9735，而在RuralVoltage数据集上为0.6059，性能差距达到37.8%。这一显著差异表明，基于服务器监控数据训练的模型直接应用于电压检测任务时，泛化能力存在明显不足。主要原因包括：（1）领域知识差异，电力系统电压数据具有明确的物理周期（如1分钟、5分钟、15分钟、1小时），而服务器数据的周期特征不同；（2）噪声特性不同，农村电网环境复杂，电压信号常受测量噪声和高频干扰影响；（3）异常定义差异，PSM数据集的异常主要表现为传感器故障和参数越限，而RuralVoltage的异常定义基于国家电能质量标准，判定标准更为严格。

为提升模型在电压数据上的泛化能力，本研究提出了TPATimesNet等改进模型。实验表明，TPATimesNet在RuralVoltage数据集上F1分数达到0.6191，相比原始TimesNet提升2.2%，验证了三相注意力机制对电压数据的针对性优化效果。
```

---

## 三、消融实验处理建议

### 3.1 问题说明

以下消融实验表格数据为虚构，需处理：

| 表格 | 位置 | 问题 |
|------|------|------|
| `tab:ablation_alpha` | 第284-299行 | 混合比例α消融实验未运行 |
| `tab:ablation_seqlen` | 第313-327行 | 序列长度消融实验部分虚构 |
| `tab:ablation_layers` | 第339-353行 | 编码器层数消融实验未运行 |

### 3.2 处理方案

**推荐方案：删除虚假表格，保留理论分析**

#### 方案A：删除α消融和层数消融表格

**修改后的 3.2.1 预设周期策略效果分析**：
```latex
\subsection{预设周期策略效果分析}

VoltageTimesNet的核心改进是预设周期与FFT混合策略。该策略的设计理念是结合数据驱动的FFT周期发现与领域知识驱动的预设周期，以期获得更全面的周期特征表示。

\textbf{理论分析}：纯FFT方法完全依赖数据驱动，对于幅值较小但物理意义明确的周期（如电网的1分钟、5分钟周期）可能无法识别。纯预设方法则失去了对数据的自适应能力，无法适应不同数据集的差异性。混合策略旨在平衡这两种方法的优劣。

\textbf{实验发现}：在seq\_len=100的配置下，VoltageTimesNet的F1分数为0.3123，低于原始TimesNet的0.6059。分析原因，预设的电网周期（60s、300s、900s、3600s）中，仅60s周期满足周期$\leq$seq\_len/2=50的有效性条件。这导致混合策略实际上仅引入了一个有效预设周期，而该周期可能已被FFT发现，混合策略的优势未能发挥。

\textbf{改进方向}：VoltageTimesNet更适合在较长序列（如seq\_len$\geq$720）下使用，以充分利用电网固有周期。未来工作可探索动态调整预设周期以适应不同序列长度的策略。
```

#### 方案B：保留序列长度消融（部分真实）

序列长度消融实验中，`seq_len=100`的数据是真实的，其他数据点需要补充实验或删除。

**如果选择仅保留真实数据点**：
```latex
\subsection{序列长度影响}

序列长度$seq\_len$是影响模型性能的重要超参数。本文默认采用seq\_len=100。

\textbf{理论分析}：过短的序列无法捕获足够的时序上下文，可能遗漏需要较长观测窗口才能识别的异常模式。过长的序列虽然包含更多信息，但由于电压异常通常是局部现象，过长窗口可能引入噪声，同时计算开销显著增加。

\textbf{实验发现}：在seq\_len=100配置下，TimesNet的F1分数为0.6059。100秒的窗口能够覆盖电压波动的主要周期（约1分钟），在性能和效率之间取得平衡。

\textbf{注意事项}：对于VoltageTimesNet，seq\_len的选择需考虑预设周期的有效性。当seq\_len=100时，预设的300s、900s、3600s周期均无法生效。若需充分利用混合周期策略，建议使用seq\_len$\geq$720。
```

---

## 四、本章小结修正

**位置**: `thesis/contents/chap03.tex` 第423-426行

**修正后**：
```latex
\section{本章小结}

本章系统介绍了实验设计与结果分析。主要发现包括：

\textbf{PSM数据集}：TimesNet系列模型达到了F1$>$0.97的优异性能，验证了基于FFT周期发现和2D卷积的时序建模方法的有效性。TimesNet以F1=0.9735的成绩表现最优，在准确率、精确率、召回率和F1分数四个指标上均表现优异。

\textbf{RuralVoltage数据集}：TPATimesNet表现最优，F1分数达到0.6191，相比原始TimesNet（F1=0.6059）提升了2.2%，验证了三相注意力机制在电压数据上的有效性。TimesNet同样表现稳健，证明了基础方法的通用性。

\textbf{挑战与不足}：电压异常检测任务具有较大挑战性，所有模型的召回率（0.19--0.47）明显低于精确率（0.75--0.90），表明存在较多漏检。VoltageTimesNet在seq\_len=100配置下表现不及预期（F1=0.3123），主要原因是预设周期受序列长度限制。

\textbf{效率特性}：TimesNet系列模型具有轻量级特点，参数量约0.5--1.2M，GPU内存占用约0.9--1.4GB，满足实时监测和边缘部署需求。

实验结果验证了本文所提方法的有效性，同时也指出了未来改进的方向，包括提升召回率、优化预设周期策略以适应不同序列长度等。
```

---

## 五、使用说明

### 5.1 修改流程

1. 打开 `thesis/contents/chap03.tex`
2. 定位到第223行，替换表格 `tab:rural_results`
3. 定位到第244行，替换实验分析段落
4. 定位到第256行，修正跨数据集对比表和分析
5. 定位到第278行，处理消融实验部分
6. 定位到第423行，修正本章小结
7. 编译验证：`cd thesis && latexmk -xelatex --shell-escape bjfuthesis-main.tex`

### 5.2 注意事项

- 修改后需同步检查摘要和第六章结论中的相关数据
- 建议使用 Git 创建修改分支，便于对比和回退
- 编译后检查表格格式和页面排版

---

## 六、附录：真实实验数据来源

| 模型 | 日志文件 | 运行日期 |
|------|---------|---------|
| TPATimesNet | `logs/TPATimesNet_RuralVoltage.log` | 2026-01-25 |
| TimesNet | `logs/TimesNet_RuralVoltage.log` | 2026-01-24 |
| MTSTimesNet | `logs/MTSTimesNet_RuralVoltage.log` | 2026-01-25 |
| VoltageTimesNet | `logs/VoltageTimesNet_RuralVoltage_fixed.log` | 2026-01-27 |

**数据权威来源**: `code/docs/实验结果汇总_论文写作材料.md`

---

*写作材料生成于 2026-01-27*
